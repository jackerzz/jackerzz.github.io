---
title: pyarmor 打包模块
tags:
  - 工程效能
categories:
  - 效能研发
date: 2023-03-16 21:50:34
---

## Pyarmor 混淆，加密
下面是一个简单的使用Pyarmor混淆Python脚本的例子。

假设我们有一个名为`hello.py`的Python脚本，内容如下：

```python
# hello.py
print("Hello, World!")
```

我们可以使用Pyarmor将其混淆并加密。首先，我们需要安装Pyarmor：

```sh
pip install pyarmor
```

然后，在命令行中进入`hello.py`所在的目录，并执行以下命令：

```sh
pyarmor obfuscate hello.py
```

这个命令将会在当前目录下生成一个名为`dist`的目录，其中包含了一个名为`hello.py`的混淆和加密后的Python脚本。我们可以将这个脚本分发给其他人使用，但如果他们没有正确的许可证文件，脚本将无法正常运行。

为了生成许可证文件，我们需要执行以下命令：

```sh
pyarmor licenses --expired 2023-12-31 1
```

这个命令将会在当前目录下生成一个名为`license.lic`的许可证文件，有效期至2030年12月31日，同时给许可证文件指定了一个名为`1`的ID号。需要注意的是，这个ID号将用于生成加密后的Python脚本，因此应该确保它是唯一的。

接下来，我们可以使用以下命令来生成加密后的Python脚本：

```sh
pyarmor pack -e " --onefile" --name hello --output dist/hello hello.py
```

这个命令将会在`dist`目录中生成一个名为`hello`的可执行文件，该文件包含了加密后的Python脚本和许可证文件。我们可以将这个文件分发给其他人使用，但如果他们没有正确的许可证文件，脚本将无法正常运行。

需要注意的是，使用Pyarmor混淆和加密Python脚本时，可能会出现一些问题，例如依赖项缺失、版本不兼容等，因此在使用Pyarmor时，需要仔细测试和检查混淆和加密的结果，以确保应用程序能够正常运行。同时，需要注意的是，代码混淆工具并不能完全保护Python代码，因此如果需要更高级别的代码保护，可能需要使用其他更加安全的技术，如加密模块、访问控制和安全审计等。


## 在Pyarmor中指定自定义的加密密钥？

在Pyarmor中，可以使用`-k`或`--key`选项来指定自定义的加密密钥。这个选项用于将Python脚本加密为`.pye`文件时使用的密钥。

以下是一个例子，假设我们有一个名为`hello.py`的Python脚本，我们可以使用以下命令将其加密为`.pye`文件，并指定自定义的加密密钥：

```sh
pyarmor obfuscate --key mykey hello.py
```

在这个命令中，我们使用了`--key`选项来指定自定义的加密密钥，即`mykey`。这个选项将会在加密Python脚本时使用指定的密钥，从而保护Python代码的安全性。

需要注意的是，使用自定义的加密密钥可能会增加代码的安全性，但也可能会带来一些风险，例如如果密钥被泄露，可能会导致代码被解密和破解。因此，在使用自定义的加密密钥时，需要仔细考虑安全问题，并采取适当的措施来保护密钥的安全性，例如使用加密和访问控制等技术来保护密钥的存储和使用。